---
- name: "Install apache and enabling firewall"
  hosts: demo_server
  become: yes

  tasks:
  - name: "Install apache2"
    apt: 
      name: apache2
      state: present
      update_cache: yes
  
  - name: "Starting apache2"
    service:
      name: apache2
      state: started
      enabled: yes
  
  - name: "Allow HTTP (port 80) through UFW(Uncomplicated Firewall)"
    ufw:
      rule: allow
      port: 80
      proto: tcp

  - name: "Allow HTTPS (port 443) through UFW"
    ufw:
      rule: allow
      port: 443
      proto: tcp

  - name: "Enable UFW firewall"
    ufw:
      state: enabled
